{"dependencies":[{"name":"@babel/runtime/helpers/defineProperty","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"invariant","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]);function c(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,s)}return o}function l(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?c(Object(s),!0).forEach(function(o){t(n,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(s,t))})}return n}function u(t,n){var o;if(\"undefined\"==typeof Symbol||null==t[\"function\"==typeof Symbol?Symbol.iterator:\"@@iterator\"]){if(Array.isArray(t)||(o=f(t))||n&&t&&\"number\"==typeof t.length){o&&(t=o);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}return(o=t[\"function\"==typeof Symbol?Symbol.iterator:\"@@iterator\"]()).next.bind(o)}function f(t,n){if(t){if(\"string\"==typeof t)return h(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return\"Object\"===o&&t.constructor&&(o=t.constructor.name),\"Map\"===o||\"Set\"===o?Array.from(t):\"Arguments\"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?h(t,n):void 0}}function h(t,n){(null==n||n>t.length)&&(n=t.length);for(var o=0,s=new Array(n);o<n;o++)s[o]=t[o];return s}var v=r(d[4]),b=(function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{viewAreaCoveragePercentThreshold:0};o(this,t),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=n}return s(t,[{key:\"dispose\",value:function(){this._timers.forEach(clearTimeout)}},{key:\"computeViewableItems\",value:function(t,n,o,s,c){var l=this._config,u=l.itemVisiblePercentThreshold,f=l.viewAreaCoveragePercentThreshold,h=null!=f,b=h?f:u;v(null!=b&&null!=u!=(null!=f),'Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold');var p=[];if(0===t)return p;var w=-1,_=c||{first:0,last:t-1},I=_.first,O=_.last;if(O>=t)return console.warn('Invalid render range computing viewability '+JSON.stringify({renderRange:c,itemCount:t})),[];for(var S=I;S<=O;S++){var j=s(S);if(j){var P=j.offset-n,A=P+j.length;if(P<o&&A>0)w=S,y(h,b,P,A,o,j.length)&&p.push(S);else if(w>=0)break}}return p}},{key:\"onUpdate\",value:function(t,n,o,s,c,l,u){var f=this;if((!this._config.waitForInteraction||this._hasInteracted)&&0!==t&&s(0)){var h=[];if(t&&(h=this.computeViewableItems(t,n,o,s,u)),this._viewableIndices.length!==h.length||!this._viewableIndices.every(function(t,n){return t===h[n]}))if(this._viewableIndices=h,this._config.minimumViewTime){var v=setTimeout(function(){f._timers.delete(v),f._onUpdateSync(h,l,c)},this._config.minimumViewTime);this._timers.add(v)}else this._onUpdateSync(h,l,c)}}},{key:\"resetViewableIndices\",value:function(){this._viewableIndices=[]}},{key:\"recordInteraction\",value:function(){this._hasInteracted=!0}},{key:\"_onUpdateSync\",value:function(t,o,s){var c=this;t=t.filter(function(t){return c._viewableIndices.includes(t)});for(var f,h=this._viewableItems,v=new Map(t.map(function(t){var n=s(t,!0);return[n.key,n]})),b=[],y=u(v);!(f=y()).done;){var p=f.value,w=n(p,2),_=w[0],I=w[1];h.has(_)||b.push(I)}for(var O,S=u(h);!(O=S()).done;){var j=O.value,P=n(j,2),A=P[0],T=P[1];v.has(A)||b.push(l(l({},T),{},{isViewable:!1}))}b.length>0&&(this._viewableItems=v,o({viewableItems:Array.from(v.values()),changed:b,viewabilityConfig:this._config}))}}]),t})();function y(t,n,o,s,c,l){if(w(o,s,c))return!0;var u=p(o,s,c);return 100*(t?u/c:u/l)>=n}function p(t,n,o){var s=Math.min(n,o)-Math.max(t,0);return Math.max(0,s)}function w(t,n,o){return t>=0&&n<=o&&n>t}m.exports=b});","lineCount":1,"map":[[1,28,10,0],[1,1556,12,0],[1,1560,12,6,"invariant"],[1,1562,12,18,"require"],[1,1564,12,25,"d"],[1,1566,12,25],[1,1570,71,6,"ViewabilityHelper"],[1,1584,81,2],[1,1593,81,2,"ViewabilityHelper"],[1,1597,83,4],[1,1601,82,4,"config"],[1,1603,83,4,"arguments"],[1,1613,83,4,"length"],[1,1620,83,4],[1,1628,83,4,"undefined"],[1,1632,83,4,"arguments"],[1,1642,83,4],[1,1645,83,4,"arguments"],[1,1655,83,4],[1,1659,82,33,"viewAreaCoveragePercentThreshold"],[1,1692,82,67],[1,1695,83,4,"_classCallCheck"],[1,1697,83,4,"this"],[1,1702,83,4,"ViewabilityHelper"],[1,1705,83,4,"this"],[1,1710,73,2,"_hasInteracted"],[1,1726,73,28],[1,1728,83,4,"this"],[1,1733,77,2,"_timers"],[1,1741,77,25],[1,1745,77,29,"Set"],[1,1749,83,4,"this"],[1,1754,78,2,"_viewableIndices"],[1,1774,83,4,"this"],[1,1779,79,2,"_viewableItems"],[1,1794,79,43],[1,1798,79,47,"Map"],[1,1802,84,4,"this"],[1,1807,84,9,"_config"],[1,1815,84,19,"config"],[1,1861,91,4,"this"],[1,1866,91,9,"_timers"],[1,1874,91,17,"forEach"],[1,1882,91,25,"clearTimeout"],[1,1941,98,4,"itemCount"],[1,1943,99,4,"scrollOffset"],[1,1945,100,4,"viewportHeight"],[1,1947,101,4,"getFrameMetrics"],[1,1949,102,4,"renderRange"],[1,1952,103,19],[1,1956,103,19,"_this$_config"],[1,1958,107,8,"this"],[1,1963,107,13,"_config"],[1,1971,105,6,"itemVisiblePercentThreshold"],[1,1973,103,19,"_this$_config"],[1,1975,105,6,"itemVisiblePercentThreshold"],[1,2003,106,6,"viewAreaCoveragePercentThreshold"],[1,2005,103,19,"_this$_config"],[1,2007,106,6,"viewAreaCoveragePercentThreshold"],[1,2040,108,10,"viewAreaMode"],[1,2042,108,61],[1,2048,108,25,"viewAreaCoveragePercentThreshold"],[1,2050,109,10,"viewablePercentThreshold"],[1,2052,109,37,"viewAreaMode"],[1,2054,110,8,"viewAreaCoveragePercentThreshold"],[1,2056,111,8,"itemVisiblePercentThreshold"],[1,2058,112,4,"invariant"],[1,2060,113,34],[1,2066,113,6,"viewablePercentThreshold"],[1,2069,114,40],[1,2075,114,9,"itemVisiblePercentThreshold"],[1,2079,115,47],[1,2085,115,11,"viewAreaCoveragePercentThreshold"],[1,2088,116,6],[1,2179,118,4],[1,2183,118,10,"viewableIndices"],[1,2188,119,4],[1,2191,119,22],[1,2195,119,8,"itemCount"],[1,2197,120,6],[1,2204,120,13,"viewableIndices"],[1,2206,122,4],[1,2210,122,8,"firstVisible"],[1,2213,122,20],[1,2215,103,19,"_ref"],[1,2217,123,26,"renderRange"],[1,2221,123,42,"first"],[1,2227,123,49],[1,2229,123,52,"last"],[1,2234,123,58,"itemCount"],[1,2236,123,70],[1,2239,123,11,"first"],[1,2241,103,19,"_ref"],[1,2243,123,11,"first"],[1,2249,123,18,"last"],[1,2251,103,19,"_ref"],[1,2253,123,18,"last"],[1,2258,124,4],[1,2261,124,8,"last"],[1,2264,124,16,"itemCount"],[1,2266,129,6],[1,2273,125,6,"console"],[1,2281,125,14,"warn"],[1,2286,126,8],[1,2332,127,10,"JSON"],[1,2337,127,15,"stringify"],[1,2348,127,26,"renderRange"],[1,2360,127,26,"renderRange"],[1,2362,127,39,"itemCount"],[1,2372,127,39,"itemCount"],[1,2380,131,4],[1,2384,131,9],[1,2388,131,13,"idx"],[1,2390,131,19,"first"],[1,2392,131,26,"idx"],[1,2395,131,33,"last"],[1,2397,131,39,"idx"],[1,2401,131,46],[1,2402,132,6],[1,2406,132,12,"metrics"],[1,2408,132,22,"getFrameMetrics"],[1,2410,132,38,"idx"],[1,2413,133,6],[1,2416,133,11,"metrics"],[1,2418,133,6],[1,2419,136,6],[1,2423,136,12,"top"],[1,2425,136,18,"metrics"],[1,2427,136,26,"offset"],[1,2434,136,35,"scrollOffset"],[1,2436,137,12,"bottom"],[1,2438,137,21,"top"],[1,2440,137,27,"metrics"],[1,2442,137,35,"length"],[1,2449,138,6],[1,2452,138,10,"top"],[1,2454,138,16,"viewportHeight"],[1,2457,138,34,"bottom"],[1,2459,138,43],[1,2461,139,8,"firstVisible"],[1,2463,139,23,"idx"],[1,2465,141,10,"_isViewable"],[1,2467,142,12,"viewAreaMode"],[1,2469,143,12,"viewablePercentThreshold"],[1,2471,144,12,"top"],[1,2473,145,12,"bottom"],[1,2475,146,12,"viewportHeight"],[1,2477,147,12,"metrics"],[1,2479,147,20,"length"],[1,2488,150,10,"viewableIndices"],[1,2490,150,26,"push"],[1,2495,150,31,"idx"],[1,2503,152,13],[1,2506,152,17,"firstVisible"],[1,2509,152,33],[1,2511,153,8],[1,2518,156,4],[1,2525,156,11,"viewableIndices"],[1,2560,164,4,"itemCount"],[1,2562,165,4,"scrollOffset"],[1,2564,166,4,"viewportHeight"],[1,2566,167,4,"getFrameMetrics"],[1,2568,168,4,"createViewToken"],[1,2570,169,4,"onViewableItemsChanged"],[1,2572,173,4,"renderRange"],[1,2575,174,10],[1,2579,174,10,"_this"],[1,2581,174,10,"this"],[1,2586,175,4],[1,2591,176,7,"this"],[1,2596,176,12,"_config"],[1,2604,176,20,"waitForInteraction"],[1,2624,176,43,"this"],[1,2629,176,48,"_hasInteracted"],[1,2646,177,20],[1,2650,177,6,"itemCount"],[1,2653,178,7,"getFrameMetrics"],[1,2655,178,23],[1,2658,175,4],[1,2659,182,4],[1,2663,182,8,"viewableIndices"],[1,2668,192,4],[1,2671,183,8,"itemCount"],[1,2675,184,6,"viewableIndices"],[1,2677,184,24,"this"],[1,2682,184,29,"computeViewableItems"],[1,2703,185,8,"itemCount"],[1,2705,186,8,"scrollOffset"],[1,2707,187,8,"viewportHeight"],[1,2709,188,8,"getFrameMetrics"],[1,2711,189,8,"renderRange"],[1,2715,193,6,"this"],[1,2720,193,11,"_viewableIndices"],[1,2737,193,28,"length"],[1,2746,193,39,"viewableIndices"],[1,2748,193,55,"length"],[1,2757,194,6,"this"],[1,2762,194,11,"_viewableIndices"],[1,2779,194,28,"every"],[1,2785,194,34],[1,2794,194,35,"v"],[1,2796,194,38,"ii"],[1,2799,194,34],[1,2806,194,45,"v"],[1,2810,194,51,"viewableIndices"],[1,2812,194,67,"ii"],[1,2817,201,4],[1,2820,200,4,"this"],[1,2825,200,9,"_viewableIndices"],[1,2842,200,28,"viewableIndices"],[1,2844,201,8,"this"],[1,2849,201,13,"_config"],[1,2857,201,21,"minimumViewTime"],[1,2873,201,38],[1,2874,202,6],[1,2878,202,12,"handle"],[1,2880,202,21,"setTimeout"],[1,2891,202,32],[1,2902,203,8,"_this"],[1,2904,203,13,"_timers"],[1,2912,203,21,"delete"],[1,2919,203,28,"handle"],[1,2922,204,8,"_this"],[1,2924,204,13,"_onUpdateSync"],[1,2938,205,10,"viewableIndices"],[1,2940,206,10,"onViewableItemsChanged"],[1,2942,207,10,"createViewToken"],[1,2946,209,9,"this"],[1,2951,209,14,"_config"],[1,2959,209,22,"minimumViewTime"],[1,2976,210,6,"this"],[1,2981,210,11,"_timers"],[1,2989,210,19,"add"],[1,2993,210,23,"handle"],[1,3001,212,6,"this"],[1,3006,212,11,"_onUpdateSync"],[1,3020,213,8,"viewableIndices"],[1,3022,214,8,"onViewableItemsChanged"],[1,3024,215,8,"createViewToken"],[1,3075,224,4,"this"],[1,3080,224,9,"_viewableIndices"],[1,3144,231,4,"this"],[1,3149,231,9,"_hasInteracted"],[1,3165,231,26],[1,3205,235,4,"viewableIndicesToCheck"],[1,3207,236,4,"onViewableItemsChanged"],[1,3209,237,4,"createViewToken"],[1,3212,238,4],[1,3216,238,4,"_this2"],[1,3218,238,4,"this"],[1,3223,240,4,"viewableIndicesToCheck"],[1,3225,240,29,"viewableIndicesToCheck"],[1,3227,240,52,"filter"],[1,3234,240,59],[1,3243,240,59,"ii"],[1,3246,240,61],[1,3253,241,6,"_this2"],[1,3255,241,11,"_viewableIndices"],[1,3272,241,28,"includes"],[1,3281,241,37,"ii"],[1,3286,252,4],[1,3290,243,4],[1,3294,252,4,"_step"],[1,3296,243,10,"prevItems"],[1,3298,243,22,"this"],[1,3303,243,27,"_viewableItems"],[1,3318,244,10,"nextItems"],[1,3320,244,22],[1,3324,244,26,"Map"],[1,3328,245,6,"viewableIndicesToCheck"],[1,3330,245,29,"map"],[1,3334,245,33],[1,3343,245,33,"ii"],[1,3346,246,8],[1,3350,246,14,"viewable"],[1,3352,246,25,"createViewToken"],[1,3354,246,41,"ii"],[1,3357,246,45],[1,3360,247,8],[1,3367,247,16,"viewable"],[1,3369,247,25,"key"],[1,3373,247,30,"viewable"],[1,3379,251,10,"changed"],[1,3384,252,4,"_iterator"],[1,3386,252,4,"_createForOfIteratorHelperLoose"],[1,3388,252,34,"nextItems"],[1,3393,252,4,"_step"],[1,3395,252,4,"_iterator"],[1,3400,252,4,"done"],[1,3406,252,45],[1,3407,252,45],[1,3411,252,45,"_ref2"],[1,3413,252,45,"_step"],[1,3415,252,45,"value"],[1,3421,252,45,"_ref3"],[1,3423,252,45,"_slicedToArray"],[1,3425,252,45,"_ref2"],[1,3427,252,45],[1,3430,252,16,"key"],[1,3432,252,45,"_ref3"],[1,3434,252,45],[1,3437,252,21,"viewable"],[1,3439,252,45,"_ref3"],[1,3441,252,45],[1,3444,253,11,"prevItems"],[1,3446,253,21,"has"],[1,3450,253,25,"key"],[1,3454,254,8,"changed"],[1,3456,254,16,"push"],[1,3461,254,21,"viewable"],[1,3464,257,4],[1,3468,257,4],[1,3472,257,4,"_step2"],[1,3474,257,4,"_iterator2"],[1,3476,257,4,"_createForOfIteratorHelperLoose"],[1,3478,257,34,"prevItems"],[1,3483,257,4,"_step2"],[1,3485,257,4,"_iterator2"],[1,3490,257,4,"done"],[1,3496,257,45],[1,3497,257,45],[1,3501,257,45,"_ref4"],[1,3503,257,45,"_step2"],[1,3505,257,45,"value"],[1,3511,257,45,"_ref5"],[1,3513,257,45,"_slicedToArray"],[1,3515,257,45,"_ref4"],[1,3517,257,45],[1,3520,257,16,"key"],[1,3522,257,45,"_ref5"],[1,3524,257,45],[1,3527,257,21,"viewable"],[1,3529,257,45,"_ref5"],[1,3531,257,45],[1,3534,258,11,"nextItems"],[1,3536,258,21,"has"],[1,3540,258,25,"key"],[1,3544,259,8,"changed"],[1,3546,259,16,"push"],[1,3551,259,8,"_objectSpread"],[1,3553,259,8,"_objectSpread"],[1,3558,259,25,"viewable"],[1,3565,259,35,"isViewable"],[1,3577,259,47],[1,3582,262,8,"changed"],[1,3584,262,16,"length"],[1,3591,262,25],[1,3595,263,6,"this"],[1,3600,263,11,"_viewableItems"],[1,3615,263,28,"nextItems"],[1,3617,264,6,"onViewableItemsChanged"],[1,3620,265,8,"viewableItems"],[1,3634,265,23,"Array"],[1,3640,265,29,"from"],[1,3645,265,34,"nextItems"],[1,3647,265,44,"values"],[1,3657,266,8,"changed"],[1,3665,266,8,"changed"],[1,3667,267,8,"viewabilityConfig"],[1,3685,267,27,"this"],[1,3690,267,32,"_config"],[1,3711,273,0],[1,3720,273,9,"_isViewable"],[1,3722,274,2,"viewAreaMode"],[1,3724,275,2,"viewablePercentThreshold"],[1,3726,276,2,"top"],[1,3728,277,2,"bottom"],[1,3730,278,2,"viewportHeight"],[1,3732,279,2,"itemLength"],[1,3735,281,2],[1,3738,281,6,"_isEntirelyVisible"],[1,3740,281,25,"top"],[1,3742,281,30,"bottom"],[1,3744,281,38,"viewportHeight"],[1,3747,282,4],[1,3754,282,11],[1,3756,284,4],[1,3760,284,10,"pixels"],[1,3762,284,19,"_getPixelsVisible"],[1,3764,284,37,"top"],[1,3766,284,42,"bottom"],[1,3768,284,50,"viewportHeight"],[1,3771,287,4],[1,3778,286,6],[1,3783,286,13,"viewAreaMode"],[1,3785,286,28,"pixels"],[1,3787,286,37,"viewportHeight"],[1,3789,286,54,"pixels"],[1,3791,286,63,"itemLength"],[1,3795,287,22,"viewablePercentThreshold"],[1,3797,291,0],[1,3806,291,9,"_getPixelsVisible"],[1,3808,292,2,"top"],[1,3810,293,2,"bottom"],[1,3812,294,2,"viewportHeight"],[1,3815,296,2],[1,3819,296,8,"visibleHeight"],[1,3821,296,24,"Math"],[1,3826,296,29,"min"],[1,3830,296,33,"bottom"],[1,3832,296,41,"viewportHeight"],[1,3835,296,59,"Math"],[1,3840,296,64,"max"],[1,3844,296,68,"top"],[1,3846,296,73],[1,3849,297,2],[1,3856,297,9,"Math"],[1,3861,297,14,"max"],[1,3865,297,18],[1,3867,297,21,"visibleHeight"],[1,3870,300,0],[1,3879,300,9,"_isEntirelyVisible"],[1,3881,301,2,"top"],[1,3883,302,2,"bottom"],[1,3885,303,2,"viewportHeight"],[1,3888,305,2],[1,3895,305,9,"top"],[1,3898,305,16],[1,3901,305,21,"bottom"],[1,3904,305,31,"viewportHeight"],[1,3907,305,49,"bottom"],[1,3909,305,58,"top"],[1,3911,308,0,"module"],[1,3913,308,7,"exports"],[1,3921,308,17,"ViewabilityHelper"]],"functionMap":{"names":["<global>","ViewabilityHelper","constructor","dispose","computeViewableItems","onUpdate","_viewableIndices.every$argument_0","setTimeout$argument_0","resetViewableIndices","recordInteraction","_onUpdateSync","viewableIndicesToCheck.filter$argument_0","viewableIndicesToCheck.map$argument_0","_isViewable","_getPixelsVisible","_isEntirelyVisible"],"mappings":"AAA;ACsE;ECU;GDI;EEK;GFE;EGK;GH4D;EIM;kCC+B,oCD;gCEQ;OFO;GJS;EOK;GPE;EQK;GRE;ESE;2DCM;wCDC;iCEI;OFG;GTsB;CDC;AaE;CbgB;AcE;CdO;AeE;CfM"}},"type":"js/module"}]}