{"dependencies":[{"name":"@babel/runtime/helpers/defineProperty","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"../Utilities/infoLog","data":{"isAsync":false}},{"name":"invariant","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),u=r(d[2]);function s(t,n){var u=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),u.push.apply(u,s)}return u}function o(n){for(var u=1;u<arguments.length;u++){var o=null!=arguments[u]?arguments[u]:{};u%2?s(Object(o),!0).forEach(function(u){t(n,u,o[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}r(d[3]);var c=r(d[4]),h=(function(){function t(u){var s=u.onMoreTasks;n(this,t),this._onMoreTasks=s,this._queueStack=[{tasks:[],popable:!1}]}return u(t,[{key:\"enqueue\",value:function(t){this._getCurrentQueue().push(t)}},{key:\"enqueueTasks\",value:function(t){var n=this;t.forEach(function(t){return n.enqueue(t)})}},{key:\"cancelTasks\",value:function(t){this._queueStack=this._queueStack.map(function(n){return o(o({},n),{},{tasks:n.tasks.filter(function(n){return-1===t.indexOf(n)})})}).filter(function(t,n){return t.tasks.length>0||0===n})}},{key:\"hasTasksToProcess\",value:function(){return this._getCurrentQueue().length>0}},{key:\"processNext\",value:function(){var t=this._getCurrentQueue();if(t.length){var n=t.shift();try{n.gen?this._genPromise(n):n.run?n.run():(c('function'==typeof n,'Expected Function, SimpleTask, or PromiseTask, but got:\\n'+JSON.stringify(n,null,2)),n())}catch(t){throw t.message='TaskQueue: Error with task '+(n.name||'')+': '+t.message,t}}}},{key:\"_getCurrentQueue\",value:function(){var t=this._queueStack.length-1,n=this._queueStack[t];return n.popable&&0===n.tasks.length&&this._queueStack.length>1?(this._queueStack.pop(),this._getCurrentQueue()):n.tasks}},{key:\"_genPromise\",value:function(t){var n=this;this._queueStack.push({tasks:[],popable:!1});var u=this._queueStack.length-1;t.gen().then(function(){n._queueStack[u].popable=!0,n.hasTasksToProcess()&&n._onMoreTasks()}).catch(function(n){throw n.message=\"TaskQueue: Error resolving Promise in task \"+t.name+\": \"+n.message,n}).done()}}]),t})();m.exports=h});","lineCount":1,"map":[[1,28,11,0],[1,644,13,16,"require"],[1,646,13,23,"d"],[1,648,13,23],[1,652,13,0],[1,656,14,6,"invariant"],[1,658,14,18,"require"],[1,660,14,25,"d"],[1,662,14,25],[1,666,44,6,"TaskQueue"],[1,680,52,2],[1,689,52,2,"TaskQueue"],[1,691,52,2,"_ref"],[1,694,52,56],[1,698,52,15,"onMoreTasks"],[1,700,52,56,"_ref"],[1,702,52,15,"onMoreTasks"],[1,714,52,56,"_classCallCheck"],[1,716,52,56,"this"],[1,721,52,56,"TaskQueue"],[1,724,53,4,"this"],[1,729,53,9,"_onMoreTasks"],[1,742,53,24,"onMoreTasks"],[1,744,54,4,"this"],[1,749,54,9,"_queueStack"],[1,763,54,25,"tasks"],[1,772,54,36,"popable"],[1,781,54,45],[1,827,62,10,"task"],[1,830,63,4,"this"],[1,835,63,9,"_getCurrentQueue"],[1,854,63,28,"push"],[1,859,63,33,"task"],[1,899,66,15,"tasks"],[1,902,66,41],[1,906,66,41,"_this"],[1,908,66,41,"this"],[1,913,67,4,"tasks"],[1,915,67,10,"forEach"],[1,923,67,18],[1,932,67,18,"task"],[1,935,67,22],[1,942,67,26,"_this"],[1,944,67,31,"enqueue"],[1,952,67,39,"task"],[1,993,70,14,"tasksToCancel"],[1,996,72,4,"this"],[1,1001,72,9,"_queueStack"],[1,1013,72,23,"this"],[1,1018,72,28,"_queueStack"],[1,1030,73,7,"map"],[1,1034,73,11],[1,1043,73,11,"queue"],[1,1046,73,16],[1,1053,73,16,"_objectSpread"],[1,1055,73,16,"_objectSpread"],[1,1060,74,11,"queue"],[1,1067,75,8,"tasks"],[1,1073,75,15,"queue"],[1,1075,75,21,"tasks"],[1,1081,75,27,"filter"],[1,1088,75,34],[1,1097,75,34,"task"],[1,1100,75,38],[1,1107,75,42],[1,1111,75,42,"tasksToCancel"],[1,1113,75,56,"indexOf"],[1,1121,75,64,"task"],[1,1130,77,7,"filter"],[1,1137,77,14],[1,1146,77,15,"queue"],[1,1148,77,22,"idx"],[1,1151,77,14],[1,1158,77,30,"queue"],[1,1160,77,36,"tasks"],[1,1166,77,42,"length"],[1,1173,77,51],[1,1176,77,64],[1,1180,77,56,"idx"],[1,1228,91,4],[1,1235,91,11,"this"],[1,1240,91,16,"_getCurrentQueue"],[1,1259,91,35,"length"],[1,1266,91,44],[1,1306,98,4],[1,1310,98,10,"queue"],[1,1312,98,18,"this"],[1,1317,98,23,"_getCurrentQueue"],[1,1336,99,4],[1,1339,99,8,"queue"],[1,1341,99,14,"length"],[1,1348,99,22],[1,1349,100,6],[1,1353,100,12,"task"],[1,1355,100,19,"queue"],[1,1357,100,25,"shift"],[1,1365,101,6],[1,1369,102,12,"task"],[1,1371,102,17,"gen"],[1,1375,104,10,"this"],[1,1380,104,15,"_genPromise"],[1,1392,104,28,"task"],[1,1395,105,19,"task"],[1,1397,105,24,"run"],[1,1401,107,10,"task"],[1,1403,107,15,"run"],[1,1410,109,10,"invariant"],[1,1412,110,28],[1,1431,110,19,"task"],[1,1433,111,12],[1,1493,112,14,"JSON"],[1,1498,112,19,"stringify"],[1,1508,112,29,"task"],[1,1510,112,35],[1,1515,112,41],[1,1519,115,10,"task"],[1,1524,117,8],[1,1530,117,15,"e"],[1,1533,120,8],[1,1539,118,8,"e"],[1,1541,118,10,"message"],[1,1549,119,10],[1,1580,119,43,"task"],[1,1582,119,48,"name"],[1,1588,119,56],[1,1592,119,62],[1,1597,119,69,"e"],[1,1599,119,71,"message"],[1,1607,120,14,"e"],[1,1654,129,4],[1,1658,129,10,"stackIdx"],[1,1660,129,21,"this"],[1,1665,129,26,"_queueStack"],[1,1677,129,38,"length"],[1,1684,129,47],[1,1686,130,10,"queue"],[1,1688,130,18,"this"],[1,1693,130,23,"_queueStack"],[1,1705,130,35,"stackIdx"],[1,1708,131,4],[1,1715,132,6,"queue"],[1,1717,132,12,"popable"],[1,1726,133,29],[1,1730,133,6,"queue"],[1,1732,133,12,"tasks"],[1,1738,133,18,"length"],[1,1746,134,6,"this"],[1,1751,134,11,"_queueStack"],[1,1763,134,23,"length"],[1,1770,134,32],[1,1773,136,6,"this"],[1,1778,136,11,"_queueStack"],[1,1790,136,23,"pop"],[1,1796,142,13,"this"],[1,1801,142,18,"_getCurrentQueue"],[1,1821,144,13,"queue"],[1,1823,144,19,"tasks"],[1,1865,148,14,"task"],[1,1868,148,33],[1,1872,148,33,"_this2"],[1,1874,148,33,"this"],[1,1879,153,4,"this"],[1,1884,153,9,"_queueStack"],[1,1896,153,21,"push"],[1,1902,153,27,"tasks"],[1,1911,153,38,"popable"],[1,1920,153,47],[1,1924,154,4],[1,1928,154,10,"stackIdx"],[1,1930,154,21,"this"],[1,1935,154,26,"_queueStack"],[1,1947,154,38,"length"],[1,1954,154,47],[1,1956,157,4,"task"],[1,1958,158,7,"gen"],[1,1964,159,7,"then"],[1,1969,159,12],[1,1980,165,8,"_this2"],[1,1982,165,13,"_queueStack"],[1,1994,165,25,"stackIdx"],[1,1997,165,35,"popable"],[1,2006,165,45],[1,2008,166,8,"_this2"],[1,2010,166,13,"hasTasksToProcess"],[1,2031,166,36,"_this2"],[1,2033,166,41,"_onMoreTasks"],[1,2050,168,7,"catch"],[1,2056,168,13],[1,2065,168,13,"ex"],[1,2068,172,8],[1,2074,169,8,"ex"],[1,2076,169,11,"message"],[1,2084,169,8],[1,2130,170,10,"task"],[1,2132,170,15,"name"],[1,2137,169,8],[1,2142,171,13,"ex"],[1,2144,171,16,"message"],[1,2152,172,14,"ex"],[1,2156,174,7,"done"],[1,2173,178,0,"module"],[1,2175,178,7,"exports"],[1,2183,178,17,"TaskQueue"]],"functionMap":{"names":["<global>","TaskQueue","constructor","enqueue","enqueueTasks","tasks.forEach$argument_0","cancelTasks","_queueStack.map$argument_0","queue.tasks.filter$argument_0","_queueStack.map.filter$argument_0","hasTasksToProcess","processNext","_getCurrentQueue","_genPromise","task.gen.then$argument_0","task.gen.then._catch$argument_0"],"mappings":"AAA;AC2C;ECQ;GDG;EEO;GFE;EGE;kBCC,0BD;GHC;EKE;WCG;kCCE,0CD;QDC;cGC,mDH;GLC;ESY;GTE;EUK;GV0B;EWK;GXkB;EYE;YCW;ODQ;aEC;OFK;GZE;CDC"}},"type":"js/module"}]}