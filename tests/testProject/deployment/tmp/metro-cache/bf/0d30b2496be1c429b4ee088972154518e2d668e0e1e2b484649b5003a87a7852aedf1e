{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/objectWithoutProperties","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/inherits","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/possibleConstructorReturn","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/getPrototypeOf","data":{"isAsync":false}},{"name":"./NativeWebSocketModule","data":{"isAsync":false}},{"name":"../Blob/Blob","data":{"isAsync":false}},{"name":"../Blob/BlobManager","data":{"isAsync":false}},{"name":"event-target-shim","data":{"isAsync":false}},{"name":"../EventEmitter/NativeEventEmitter","data":{"isAsync":false}},{"name":"../Utilities/Platform","data":{"isAsync":false}},{"name":"./WebSocketEvent","data":{"isAsync":false}},{"name":"base64-js","data":{"isAsync":false}},{"name":"../Utilities/binaryToBase64","data":{"isAsync":false}},{"name":"invariant","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),s=t(r(d[1])),n=t(r(d[2])),o=t(r(d[3])),c=t(r(d[4])),u=t(r(d[5])),l=t(r(d[6])),f=t(r(d[7]));function h(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var y=r(d[8]),b=r(d[9]),p=r(d[10]),v=r(d[11]),_=(r(d[12]),r(d[13])),E=r(d[14]),k=r(d[15]),S=r(d[16]),I=0,N=1,w=2,O=3,C=0,L=(function(t){(0,c.default)(A,t);var p,L,T=(p=A,L=h(),function(){var t,s=(0,l.default)(p);if(L){var n=(0,l.default)(this).constructor;t=Reflect.construct(s,arguments,n)}else t=s.apply(this,arguments);return(0,u.default)(this,t)});function A(t,o,c){var u;(0,n.default)(this,A),(u=T.call(this)).CONNECTING=I,u.OPEN=N,u.CLOSING=w,u.CLOSED=O,u.readyState=I,'string'==typeof o&&(o=[o]);var l=c||{},h=l.headers,y=void 0===h?{}:h,b=(0,s.default)(l,[\"headers\"]);return b&&'string'==typeof b.origin&&(console.warn('Specifying `origin` as a WebSocket connection option is deprecated. Include it under `headers` instead.'),y.origin=b.origin,delete b.origin),Object.keys(b).length>0&&console.warn('Unrecognized WebSocket connection option(s) `'+Object.keys(b).join('`, `')+\"`. Did you mean to put these under `headers`?\"),Array.isArray(o)||(o=null),u._eventEmitter=new v(f.default),u._socketId=C++,u._registerEvents(),f.default.connect(t,o,{headers:y},u._socketId),u}return(0,o.default)(A,[{key:\"close\",value:function(t,s){this.readyState!==this.CLOSING&&this.readyState!==this.CLOSED&&(this.readyState=this.CLOSING,this._close(t,s))}},{key:\"send\",value:function(t){if(this.readyState===this.CONNECTING)throw new Error('INVALID_STATE_ERR');if(t instanceof y)return S(b.isAvailable,'Native module BlobModule is required for blob support'),void b.sendOverSocket(t,this._socketId);if('string'!=typeof t){if(!(t instanceof ArrayBuffer||ArrayBuffer.isView(t)))throw new Error('Unsupported data type');f.default.sendBinary(k(t),this._socketId)}else f.default.send(t,this._socketId)}},{key:\"ping\",value:function(){if(this.readyState===this.CONNECTING)throw new Error('INVALID_STATE_ERR');f.default.ping(this._socketId)}},{key:\"_close\",value:function(t,s){var n='number'==typeof t?t:1e3,o='string'==typeof s?s:'';f.default.close(n,o,this._socketId),b.isAvailable&&'blob'===this._binaryType&&b.removeWebSocketHandler(this._socketId)}},{key:\"_unregisterEvents\",value:function(){this._subscriptions.forEach(function(t){return t.remove()}),this._subscriptions=[]}},{key:\"_registerEvents\",value:function(){var t=this;this._subscriptions=[this._eventEmitter.addListener('websocketMessage',function(s){if(s.id===t._socketId){var n=s.data;switch(s.type){case'binary':n=E.toByteArray(s.data).buffer;break;case'blob':n=b.createFromOptions(s.data)}t.dispatchEvent(new _('message',{data:n}))}}),this._eventEmitter.addListener('websocketOpen',function(s){s.id===t._socketId&&(t.readyState=t.OPEN,t.protocol=s.protocol,t.dispatchEvent(new _('open')))}),this._eventEmitter.addListener('websocketClosed',function(s){s.id===t._socketId&&(t.readyState=t.CLOSED,t.dispatchEvent(new _('close',{code:s.code,reason:s.reason})),t._unregisterEvents(),t.close())}),this._eventEmitter.addListener('websocketFailed',function(s){s.id===t._socketId&&(t.readyState=t.CLOSED,t.dispatchEvent(new _('error',{message:s.message})),t.dispatchEvent(new _('close',{message:s.message})),t._unregisterEvents(),t.close())})]}},{key:\"binaryType\",get:function(){return this._binaryType},set:function(t){if('blob'!==t&&'arraybuffer'!==t)throw new Error(\"binaryType must be either 'blob' or 'arraybuffer'\");'blob'!==this._binaryType&&'blob'!==t||(S(b.isAvailable,'Native module BlobModule is required for blob support'),'blob'===t?b.addWebSocketHandler(this._socketId):b.removeWebSocketHandler(this._socketId)),this._binaryType=t}}]),A})(p.apply(void 0,['close','error','message','open']));L.CONNECTING=I,L.OPEN=N,L.CLOSING=w,L.CLOSED=O,m.exports=L});","lineCount":1,"map":[[1,28,11,0],[1,133,25,0,"_NativeWebSocketModule"],[1,135,25,0,"_interopRequireDefault"],[1,137,25,0,"r"],[1,139,25,0,"d"],[1,141,25,0],[1,394,13,0],[1,398,13,6,"Blob"],[1,400,13,13,"require"],[1,402,13,20,"d"],[1,404,13,20],[1,408,14,6,"BlobManager"],[1,410,14,20,"require"],[1,412,14,27,"d"],[1,414,14,27],[1,418,15,6,"EventTarget"],[1,420,15,20,"require"],[1,422,15,27,"d"],[1,424,15,27],[1,429,16,6,"NativeEventEmitter"],[1,431,16,27,"require"],[1,433,16,34,"d"],[1,435,16,34],[1,440,18,6,"WebSocketEvent"],[1,443,17,17,"require"],[1,445,17,24,"d"],[1,447,17,24],[1,452,18,23,"require"],[1,454,18,30,"d"],[1,456,18,30],[1,462,20,6,"base64"],[1,464,20,15,"require"],[1,466,20,22,"d"],[1,468,20,22],[1,473,21,6,"binaryToBase64"],[1,475,21,23,"require"],[1,477,21,30,"d"],[1,479,21,30],[1,484,22,6,"invariant"],[1,486,22,18,"require"],[1,488,22,25,"d"],[1,490,22,25],[1,495,41,6,"CONNECTING"],[1,497,41,19],[1,499,42,6,"OPEN"],[1,501,42,13],[1,503,43,6,"CLOSING"],[1,505,43,16],[1,507,44,6,"CLOSED"],[1,509,44,15],[1,511,50,4,"nextWebSocketId"],[1,513,50,22],[1,515,58,6,"WebSocket"],[1,746,85,2],[1,755,85,2,"WebSocket"],[1,757,86,4,"url"],[1,759,87,4,"protocols"],[1,761,88,4,"options"],[1,764,89,4],[1,768,89,4,"_this"],[1,771,89,4],[1,773,89,4,"_classCallCheck2"],[1,775,89,4,"default"],[1,784,89,4,"this"],[1,789,89,4,"WebSocket"],[1,793,90,4,"_this"],[1,795,90,4,"_super"],[1,797,90,4,"call"],[1,802,90,4,"this"],[1,809,64,2,"CONNECTING"],[1,820,64,23,"CONNECTING"],[1,822,89,4,"_this"],[1,824,65,2,"OPEN"],[1,829,65,17,"OPEN"],[1,831,89,4,"_this"],[1,833,66,2,"CLOSING"],[1,841,66,20,"CLOSING"],[1,843,89,4,"_this"],[1,845,67,2,"CLOSED"],[1,852,67,19,"CLOSED"],[1,854,89,4,"_this"],[1,856,82,2,"readyState"],[1,867,82,23,"CONNECTING"],[1,869,91,29],[1,886,91,15,"protocols"],[1,890,92,6,"protocols"],[1,893,92,19,"protocols"],[1,897,89,4],[1,901,89,4,"_ref2"],[1,903,95,44,"options"],[1,909,89,4,"_ref2$headers"],[1,911,89,4,"_ref2"],[1,913,95,11,"headers"],[1,921,95,11,"headers"],[1,928,89,4,"undefined"],[1,932,89,4,"_ref2$headers"],[1,937,89,4,"_ref2$headers"],[1,939,95,28,"unrecognized"],[1,942,89,4],[1,944,89,4,"_objectWithoutProperties2"],[1,946,89,4,"default"],[1,955,89,4,"_ref2"],[1,958,89,4],[1,970,89,4],[1,977,101,8,"unrecognized"],[1,980,101,55],[1,997,101,31,"unrecognized"],[1,999,101,44,"origin"],[1,1008,102,6,"console"],[1,1016,102,14,"warn"],[1,1021,103,8],[1,1128,108,6,"headers"],[1,1130,108,14,"origin"],[1,1137,108,23,"unrecognized"],[1,1139,108,36,"origin"],[1,1153,112,13,"unrecognized"],[1,1155,112,26,"origin"],[1,1163,116,8,"Object"],[1,1170,116,15,"keys"],[1,1175,116,20,"unrecognized"],[1,1178,116,34,"length"],[1,1185,116,43],[1,1188,117,6,"console"],[1,1196,117,14,"warn"],[1,1201,118,8],[1,1249,119,10,"Object"],[1,1256,119,17,"keys"],[1,1261,119,22,"unrecognized"],[1,1264,119,36,"join"],[1,1269,119,41],[1,1277,120,10],[1,1326,125,9,"Array"],[1,1332,125,15,"isArray"],[1,1340,125,23,"protocols"],[1,1345,126,6,"protocols"],[1,1347,126,18],[1,1353,129,4,"_this"],[1,1355,129,9,"_eventEmitter"],[1,1369,129,25],[1,1373,129,29,"NativeEventEmitter"],[1,1375,129,48,"NativeWebSocketModule"],[1,1377,129,48,"NativeWebSocketModule"],[1,1386,130,4,"_this"],[1,1388,130,9,"_socketId"],[1,1398,130,21,"nextWebSocketId"],[1,1402,131,4,"_this"],[1,1404,131,9,"_registerEvents"],[1,1422,132,4,"NativeWebSocketModule"],[1,1424,132,4,"NativeWebSocketModule"],[1,1432,132,26,"connect"],[1,1440,132,34,"url"],[1,1442,132,39,"protocols"],[1,1445,132,51,"headers"],[1,1453,132,51,"headers"],[1,1456,132,61,"_this"],[1,1458,132,66,"_socketId"],[1,1469,89,4,"_this"],[1,1522,157,8,"code"],[1,1524,157,23,"reason"],[1,1527,158,8,"this"],[1,1532,158,13,"readyState"],[1,1545,158,28,"this"],[1,1550,158,33,"CLOSING"],[1,1559,158,44,"this"],[1,1564,158,49,"readyState"],[1,1577,158,64,"this"],[1,1582,158,69,"CLOSED"],[1,1591,162,4,"this"],[1,1596,162,9,"readyState"],[1,1607,162,22,"this"],[1,1612,162,27,"CLOSING"],[1,1620,163,4,"this"],[1,1625,163,9,"_close"],[1,1632,163,16,"code"],[1,1634,163,22,"reason"],[1,1667,166,7,"data"],[1,1670,167,4],[1,1673,167,8,"this"],[1,1678,167,13,"readyState"],[1,1691,167,28,"this"],[1,1696,167,33,"CONNECTING"],[1,1707,168,6],[1,1713,168,12],[1,1717,168,16,"Error"],[1,1723,168,22],[1,1744,171,4],[1,1747,171,8,"data"],[1,1760,171,24,"Blob"],[1,1762,177,6],[1,1769,172,6,"invariant"],[1,1771,173,8,"BlobManager"],[1,1773,173,20,"isAvailable"],[1,1785,174,8],[1,1847,176,6,"BlobManager"],[1,1849,176,18,"sendOverSocket"],[1,1864,176,33,"data"],[1,1866,176,39,"this"],[1,1871,176,44,"_socketId"],[1,1882,180,4],[1,1885,180,24],[1,1902,180,15,"data"],[1,1904,180,4],[1,1905,185,4],[1,1910,185,8,"data"],[1,1923,185,24,"ArrayBuffer"],[1,1936,185,39,"ArrayBuffer"],[1,1948,185,51,"isView"],[1,1955,185,58,"data"],[1,1959,190,4],[1,1965,190,10],[1,1969,190,14,"Error"],[1,1975,190,20],[1,2000,186,6,"NativeWebSocketModule"],[1,2002,186,6,"NativeWebSocketModule"],[1,2010,186,28,"sendBinary"],[1,2021,186,39,"binaryToBase64"],[1,2023,186,54,"data"],[1,2026,186,61,"this"],[1,2031,186,66,"_socketId"],[1,2047,181,6,"NativeWebSocketModule"],[1,2049,181,6,"NativeWebSocketModule"],[1,2057,181,28,"send"],[1,2062,181,33,"data"],[1,2064,181,39,"this"],[1,2069,181,44,"_socketId"],[1,2111,194,4],[1,2114,194,8,"this"],[1,2119,194,13,"readyState"],[1,2132,194,28,"this"],[1,2137,194,33,"CONNECTING"],[1,2148,195,6],[1,2154,195,12],[1,2158,195,16,"Error"],[1,2164,195,22],[1,2185,198,4,"NativeWebSocketModule"],[1,2187,198,4,"NativeWebSocketModule"],[1,2195,198,26,"ping"],[1,2200,198,31,"this"],[1,2205,198,36,"_socketId"],[1,2247,201,9,"code"],[1,2249,201,24,"reason"],[1,2252,203,4],[1,2256,203,10,"statusCode"],[1,2258,203,39],[1,2275,203,30,"code"],[1,2277,203,50,"code"],[1,2279,46,21],[1,2283,204,10,"closeReason"],[1,2285,204,42],[1,2302,204,31,"reason"],[1,2304,204,53,"reason"],[1,2306,204,62],[1,2309,205,4,"NativeWebSocketModule"],[1,2311,205,4,"NativeWebSocketModule"],[1,2319,205,26,"close"],[1,2325,205,32,"statusCode"],[1,2327,205,44,"closeReason"],[1,2329,205,57,"this"],[1,2334,205,62,"_socketId"],[1,2345,207,8,"BlobManager"],[1,2347,207,20,"isAvailable"],[1,2360,207,56],[1,2369,207,35,"this"],[1,2374,207,40,"_binaryType"],[1,2387,208,6,"BlobManager"],[1,2389,208,18,"removeWebSocketHandler"],[1,2412,208,41,"this"],[1,2417,208,46,"_socketId"],[1,2472,213,4,"this"],[1,2477,213,9,"_subscriptions"],[1,2492,213,24,"forEach"],[1,2500,213,32],[1,2509,213,32,"e"],[1,2512,213,33],[1,2519,213,37,"e"],[1,2521,213,39,"remove"],[1,2532,214,4,"this"],[1,2537,214,9,"_subscriptions"],[1,2597,217,26],[1,2601,217,26,"_this2"],[1,2603,217,26,"this"],[1,2608,218,4,"this"],[1,2613,218,9,"_subscriptions"],[1,2629,219,6,"this"],[1,2634,219,11,"_eventEmitter"],[1,2648,219,25,"addListener"],[1,2660,219,37],[1,2679,219,57],[1,2688,219,57,"ev"],[1,2691,220,8],[1,2694,220,12,"ev"],[1,2696,220,15,"id"],[1,2701,220,22,"_this2"],[1,2703,220,27,"_socketId"],[1,2713,220,8],[1,2714,223,8],[1,2718,223,12,"data"],[1,2720,223,19,"ev"],[1,2722,223,22,"data"],[1,2727,224,8],[1,2734,224,16,"ev"],[1,2736,224,19,"type"],[1,2742,225,10],[1,2746,225,15],[1,2755,226,12,"data"],[1,2757,226,19,"base64"],[1,2759,226,26,"toByteArray"],[1,2771,226,38,"ev"],[1,2773,226,41,"data"],[1,2779,226,47,"buffer"],[1,2786,227,12],[1,2792,228,10],[1,2796,228,15],[1,2803,229,12,"data"],[1,2805,229,19,"BlobManager"],[1,2807,229,31,"createFromOptions"],[1,2825,229,49,"ev"],[1,2827,229,52,"data"],[1,2833,232,8,"_this2"],[1,2835,232,13,"dispatchEvent"],[1,2849,232,27],[1,2853,232,31,"WebSocketEvent"],[1,2855,232,46],[1,2866,232,58,"data"],[1,2871,232,58,"data"],[1,2879,234,6,"this"],[1,2884,234,11,"_eventEmitter"],[1,2898,234,25,"addListener"],[1,2910,234,37],[1,2926,234,54],[1,2935,234,54,"ev"],[1,2938,235,12,"ev"],[1,2940,235,15,"id"],[1,2945,235,22,"_this2"],[1,2947,235,27,"_socketId"],[1,2959,238,8,"_this2"],[1,2961,238,13,"readyState"],[1,2972,238,26,"_this2"],[1,2974,238,31,"OPEN"],[1,2979,239,8,"_this2"],[1,2981,239,13,"protocol"],[1,2990,239,24,"ev"],[1,2992,239,27,"protocol"],[1,3001,240,8,"_this2"],[1,3003,240,13,"dispatchEvent"],[1,3017,240,27],[1,3021,240,31,"WebSocketEvent"],[1,3023,240,46],[1,3035,242,6,"this"],[1,3040,242,11,"_eventEmitter"],[1,3054,242,25,"addListener"],[1,3066,242,37],[1,3084,242,56],[1,3093,242,56,"ev"],[1,3096,243,12,"ev"],[1,3098,243,15,"id"],[1,3103,243,22,"_this2"],[1,3105,243,27,"_socketId"],[1,3117,246,8,"_this2"],[1,3119,246,13,"readyState"],[1,3130,246,26,"_this2"],[1,3132,246,31,"CLOSED"],[1,3139,247,8,"_this2"],[1,3141,247,13,"dispatchEvent"],[1,3155,248,10],[1,3159,248,14,"WebSocketEvent"],[1,3161,248,29],[1,3170,249,12,"code"],[1,3175,249,18,"ev"],[1,3177,249,21,"code"],[1,3182,250,12,"reason"],[1,3189,250,20,"ev"],[1,3191,250,23,"reason"],[1,3201,253,8,"_this2"],[1,3203,253,13,"_unregisterEvents"],[1,3223,254,8,"_this2"],[1,3225,254,13,"close"],[1,3236,256,6,"this"],[1,3241,256,11,"_eventEmitter"],[1,3255,256,25,"addListener"],[1,3267,256,37],[1,3285,256,56],[1,3294,256,56,"ev"],[1,3297,257,12,"ev"],[1,3299,257,15,"id"],[1,3304,257,22,"_this2"],[1,3306,257,27,"_socketId"],[1,3318,260,8,"_this2"],[1,3320,260,13,"readyState"],[1,3331,260,26,"_this2"],[1,3333,260,31,"CLOSED"],[1,3340,261,8,"_this2"],[1,3342,261,13,"dispatchEvent"],[1,3356,262,10],[1,3360,262,14,"WebSocketEvent"],[1,3362,262,29],[1,3371,263,12,"message"],[1,3379,263,21,"ev"],[1,3381,263,24,"message"],[1,3392,266,8,"_this2"],[1,3394,266,13,"dispatchEvent"],[1,3408,267,10],[1,3412,267,14,"WebSocketEvent"],[1,3414,267,29],[1,3423,268,12,"message"],[1,3431,268,21,"ev"],[1,3433,268,24,"message"],[1,3444,271,8,"_this2"],[1,3446,271,13,"_unregisterEvents"],[1,3466,272,8,"_this2"],[1,3468,272,13,"close"],[1,3515,136,4],[1,3522,136,11,"this"],[1,3527,136,16,"_binaryType"],[1,3553,139,17,"binaryType"],[1,3556,140,4],[1,3559,140,23],[1,3568,140,8,"binaryType"],[1,3571,140,48],[1,3587,140,33,"binaryType"],[1,3589,141,6],[1,3595,141,12],[1,3599,141,16,"Error"],[1,3605,141,22],[1,3658,143,29],[1,3667,143,8,"this"],[1,3672,143,13,"_binaryType"],[1,3685,143,54],[1,3694,143,39,"binaryType"],[1,3698,144,6,"invariant"],[1,3700,145,8,"BlobManager"],[1,3702,145,20,"isAvailable"],[1,3714,146,8],[1,3771,148,25],[1,3780,148,10,"binaryType"],[1,3782,149,8,"BlobManager"],[1,3784,149,20,"addWebSocketHandler"],[1,3804,149,40,"this"],[1,3809,149,45,"_socketId"],[1,3820,151,8,"BlobManager"],[1,3822,151,20,"removeWebSocketHandler"],[1,3845,151,43,"this"],[1,3850,151,48,"_socketId"],[1,3862,154,4,"this"],[1,3867,154,9,"_binaryType"],[1,3879,154,23,"binaryType"],[1,3889,58,25,"EventTarget"],[1,3891,58,36,"apply"],[1,3902,58,25,"undefined"],[1,3905,48,26],[1,3913,48,35],[1,3921,48,44],[1,3931,48,55],[1,3941,58,6,"WebSocket"],[1,3943,59,9,"CONNECTING"],[1,3954,59,30,"CONNECTING"],[1,3956,58,6,"WebSocket"],[1,3958,60,9,"OPEN"],[1,3963,60,24,"OPEN"],[1,3965,58,6,"WebSocket"],[1,3967,61,9,"CLOSING"],[1,3975,61,27,"CLOSING"],[1,3977,58,6,"WebSocket"],[1,3979,62,9,"CLOSED"],[1,3986,62,26,"CLOSED"],[1,3988,278,0,"module"],[1,3990,278,7,"exports"],[1,3998,278,17,"WebSocket"]],"functionMap":{"names":["<global>","WebSocket","constructor","get__binaryType","set__binaryType","close","send","ping","_close","_unregisterEvents","_subscriptions.forEach$argument_0","_registerEvents","_eventEmitter.addListener$argument_1"],"mappings":"AAA;ACyD;EC2B;GDgD;EEE;GFE;EGE;GHgB;EIE;GJO;EKE;GLyB;EME;GNM;EOE;GPS;EQE;gCCC,eD;GRE;EUE;yDCE;ODc;sDCC;ODO;wDCC;ODa;wDCC;ODiB;GVE;CDC"}},"type":"js/module"}]}